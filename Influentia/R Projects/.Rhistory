library(tidyverse)
library(magrittr)
ilinet_tbl  <- read_csv('input/ILINet.csv') %>%
arrange(REGION, YEAR, WEEK)
map(ilinet_tbl, ~length(unique(.x)))
ilinet_tbl <- ilinet_tbl[, map_lgl(ilinet_tbl, ~length(unique(.x)) > 2)]
table(ilinet_tbl$WEEK)
ilinet_tbl <- ilinet_tbl[, map_lgl(ilinet_tbl, ~length(unique(.x)) > 2)]
table(ilinet_tbl$WEEK)
ilinet_tbl %<>%
filter(WEEK != 53)
ilinet_tbl[, 4:7] <- map(ilinet_tbl[, 4:7], as.numeric)
ilinet_tbl %>%
group_by(REGION) %>%
summarise_all(function(x){sum(is.na(x))}) %>%
View
ilinet_tbl %>%
filter(REGION %in% c('Florida', 'Virgin Islands')) %>%
group_by(REGION) %>%
summarise_all(function(x){sum(is.na(x))/length(x)}) %>%
View
ilinet_tbl %<>%
filter(!(REGION %in% c('Florida', 'Virgin Islands')))
ilinet_tbl %<>%
mutate(
YEARWEEK   = paste(YEAR, WEEK, sep = '-'),
PRETTYDATE = as.Date(paste(YEAR, WEEK, 1, sep="-"), "%Y-%U-%u")
)
train <- ilinet_tbl %>%
filter(PRETTYDATE < max(PRETTYDATE) - lubridate::weeks(3))
test <- ilinet_tbl %>%
filter(PRETTYDATE >= max(PRETTYDATE) - lubridate::weeks(3))
saveRDS(train, 'data/train.rds')
saveRDS(test, 'data/test.rds')
write_csv(train, 'data/train.csv')
write_csv(test, 'data/test.csv')
train
train
library(tidyverse)
library(magrittr)
ilinet_tbl  <- read_csv('input/ILINet.csv') %>%
arrange(REGION, YEAR, WEEK)
map(ilinet_tbl, ~length(unique(.x)))
ilinet_tbl <- ilinet_tbl[, map_lgl(ilinet_tbl, ~length(unique(.x)) > 2)]
table(ilinet_tbl$WEEK)
ilinet_tbl %<>%
filter(WEEK != 53)
ilinet_tbl[, 4:7] <- map(ilinet_tbl[, 4:7], as.numeric)
ilinet_tbl %>%
group_by(REGION) %>%
summarise_all(function(x){sum(is.na(x))}) %>%
View
ilinet_tbl %>%
filter(REGION %in% c('Florida', 'Virgin Islands')) %>%
group_by(REGION) %>%
summarise_all(function(x){sum(is.na(x))/length(x)}) %>%
View
ilinet_tbl %<>%
filter(!(REGION %in% c('Florida', 'Virgin Islands')))
ilinet_tbl %<>%
mutate(
YEARWEEK   = paste(YEAR, WEEK, sep = '-'),
PRETTYDATE = as.Date(paste(YEAR, WEEK, 1, sep="-"), "%Y-%U-%u")
)
train <- ilinet_tbl %>%
filter(PRETTYDATE < max(PRETTYDATE) - lubridate::weeks(3))
test <- ilinet_tbl %>%
filter(PRETTYDATE >= max(PRETTYDATE) - lubridate::weeks(3))
p <- plot_ly(ggplot2::train, y = ~REGION, color = ~ILITOTAL, type = "box")
library(tidyverse)
library(magrittr)
library(plotly)
p <- plot_ly(ggplot2::train, y = ~REGION, color = ~ILITOTAL, type = "box")
p <- plot_ly(train, y = ~REGION, color = ~ILITOTAL, type = "box")
plot_ly(train, y = ~REGION, color = ~ILITOTAL, type = "box")
plot_ly(train, x = ~REGION, y = ~ILITOTAL, type = "box")
plot_ly(train, x = ~REGION, y = ~ILITOTAL, type = "box")
plot_ly(train, x = ~REGION, y = ~ILITOTAL, type = "box")
